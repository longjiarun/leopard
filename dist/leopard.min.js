!function(){var e=window,t=0,s=1,r=e.ajax||e.Zepto.ajax||e.jQuery.ajax,n={},a={},c=function(e,t,s){e&&e.forEach(function(e){e&&e.apply(t,s)})},u=function(e,t,s){var r=e.id,n=t[r],a=e.success,u=e.error;return n&&n.initial?!0:(null!=r&&(!n&&(n={sstack:[],estack:[]}),n.sstack.push(a),n.estack.push(u),n.initial=!0,e.success=function(){var e=arguments;n.completed=!0,n.succeed=!0,n.sargs=e,c(n.sstack,this,e)},e.error=function(){var e=arguments;n.completed=!0,n.succeed=!1,n.eargs=e,c(n.estack,this,e)},t[r]=n),!1)},i=function(e){return u(e,n,this)?this:(r&&r(e),this)},o=function(e){if(u(e,a,this))return this;var t=e.template,s=e.success,r=e.error;try{var n=t&&t(e.data);n&&(e.element.innerHTML=n),s&&s()}catch(c){r&&r(c)}return this},l=/([^=&]+)(=([^&#]*))?/g,p=function(){var t={},s=e.location.search.substr(1);return s&&s.replace(l,function(e,s,r,n){t[s]=n?decodeURIComponent(n):void 0}),t},d=function(e){var r=e.id,c=e.event,u=c===t?n:c===s?a:null,i=u&&u[r],o=e.success,l=e.error;if(i){var p=i.sargs,d=i.eargs,h=i.succeed;return i.completed?(h&&o&&o.apply(null,p),!h&&l&&l.apply(null,d)):(i.sstack.push(o),i.estack.push(l)),this}return null!=r&&u&&(u[r]={sstack:[o],estack:[l]}),this},h={AJAX_EVENT:t,RENDER_EVENT:s,ajax:i,render:o,getQuerystring:p,listener:d};"undefined"!=typeof module&&module.exports?module.exports=h:e.leopard=h}();